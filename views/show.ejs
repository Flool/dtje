<!DOCTYPE html>
<html>

<head>
    <title>Don't Think, Just Eat</title>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Materialize CSS Framework -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <link rel='stylesheet' href='/stylesheets/style.css' />


    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
          height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      </style>
</head>
<body>
    <a href="/" class="brand-logo left">Don't Think, Just Eat</a>
    <!-- new html below -->
    <ul class="right">
        <% if (user) { %>
            <li>
                <a href="/logout">
                    <i class="material-icons left">trending_flat</i>Log Out</a>
            </li>
            <% } else { %>
                <li>
                    <a href="/auth/google">
                        <i class="material-icons left">vpn_key</i>Login with Google</a>
                </li>
            <% } %>
    </ul>

<div>
    <a href="/show?location=<%= location %>">TRY AGAIN</a>
</div>

    <div>
                <%= restaurant.name %></br>
                <%= restaurant.categories[0].title %></br> 
                <%= restaurant.price %></br> 
                <%= restaurant.rating %></br> 
                <%= restaurant.location.display_address.join(", ") %> </br> 
                <img src=<%= restaurant.image_url %> height="80">
    </div>

 
      <div id="map"></div>
      <script>
        function initMap() {
          var thisPlace = {lat: <%= restaurant.coordinates.latitude %>, lng: <%= restaurant.coordinates.longitude %>}
          var map = new google.maps.Map(document.getElementById('map'), {
            center: thisPlace,
            zoom: 18
          });
          var marker = new google.maps.Marker({
              position: thisPlace, 
              map
          })
        }
      </script>


    <form method="POST" action='/restaurants/<%= restaurant.id %>/like'>
        <button type="submit">Like</button>
    </form>


    <!-- jQuery (required by Materialize) -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <!-- Using Underscore for collection manipulation and client-side templatin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <!-- JavaScript for Materialize -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script src="javascripts/app.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<%=mapKey%>&callback=initMap"
    async defer></script>
</body>

</html>